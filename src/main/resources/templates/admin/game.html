<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>ê²½ê¸° ì¶”ê°€</title>

    <style>
        .date-container {
            display: flex;
            align-items: center;
            margin-bottom: 15px;
            justify-content: flex-end;
        }

        td {
            padding: 1px !important;
            font-size: 8px;
        }

        /*.player-mvp {*/
        /*    appearance: none; !* ê¸°ë³¸ ë“œë¡­ë‹¤ìš´ ìŠ¤íƒ€ì¼ ì œê±° *!*/
        /*    -webkit-appearance: none; !* ì‚¬íŒŒë¦¬(iOS) ì§€ì› *!*/
        /*    -moz-appearance: none; !* Firefox ì§€ì› *!*/
        /*    padding-right: 0px; !* í™”ì‚´í‘œ ê³µê°„ ì—†ì• ê¸° transform-origin: center center; *!*/
        /*    background-image: none !important; !* í™”ì‚´í‘œ ì•„ì´ì½˜ ì œê±° *!*/
        /*    font-size: 2px;  margin-top: 10px; */
        /*}*/

        .player-mvpp {
            width: 90%;   /* ë¶€ëª¨ ì¹¸ì— ë§ê²Œ í¬ê¸° í™•ì¥ */
            height: 90%;  /* ë¶€ëª¨ ì¹¸ì— ë§ê²Œ í¬ê¸° í™•ì¥ */
            transform: scale(2); /* ì²´í¬ë°•ìŠ¤ í¬ê¸°ë¥¼ ë‘ ë°°ë¡œ í™•ëŒ€ */
             /* ë³€í™˜ ê¸°ì¤€ ì¤‘ì•™ ì„¤ì • */

        }

        .player-mvp {
            transform: scale(2); /* ì²´í¬ë°•ìŠ¤ í¬ê¸°ë¥¼ ë‘ ë°°ë¡œ í™•ëŒ€ */
            transform-origin: center center; /* ë³€í™˜ ê¸°ì¤€ì„ ì¤‘ì•™ìœ¼ë¡œ ì„¤ì • */
            /* ë³€í™˜ ê¸°ì¤€ ì¤‘ì•™ ì„¤ì • */
            margin: 25% 0px 0px 35%;
        }

        .submit-button {
            padding: 10px 25px; /* ë²„íŠ¼ í¬ê¸° í‚¤ìš°ê¸° */
            font-size: 15px; /* ê¸€ì í¬ê¸° í‚¤ìš°ê¸° */
            background-color: #007bff; /* ë°°ê²½ìƒ‰ */
            color: white; /* ê¸€ì ìƒ‰ */
            border: none; /* ê¸°ë³¸ í…Œë‘ë¦¬ ì œê±° */
            border-radius: 5px; /* ëª¨ì„œë¦¬ ë‘¥ê¸€ê²Œ */
            cursor: pointer; /* ë§ˆìš°ìŠ¤ í¬ì¸í„° */
        }

        .submit-button:hover {
            background-color: #0056b3; /* ë§ˆìš°ìŠ¤ ì˜¤ë²„ ì‹œ ë°°ê²½ìƒ‰ */
        }

    </style>
</head>
<script src="https://code.jquery.com/jquery-3.1.1.min.js"></script>
<script>
    function updateMVPIndex() {
        if(validateMVPSelection()){
            let checkboxes = document.querySelectorAll(".player-mvp");
            let hiddenInput = document.getElementById("mvpIndex");

            checkboxes.forEach((checkbox, index) => {
                if (checkbox.checked) {
                    hiddenInput.value = index; // ì²´í¬ëœ ì¸ë±ìŠ¤ ì €ì¥
                }
            });
        } else {
            event.preventDefault(); // ğŸš¨ submit ë°©ì§€
            return false;
        }
    }

    function validateMVPSelection() {
        let checkboxes = document.querySelectorAll(".player-mvp");
        let checkedCount = 0;

        checkboxes.forEach((checkbox) => {
            if (checkbox.checked) {
                checkedCount++;
            }
        });

        if (checkedCount === 0) {
            alert("âš  MVPë¥¼ í•œ ëª… ì„ íƒí•´ì•¼ í•©ë‹ˆë‹¤.");
            return false; // í¼ ì œì¶œ ë°©ì§€
        } else if (checkedCount > 1) {
            alert("âš  MVPëŠ” í•œ ëª…ë§Œ ì„ íƒí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.");
            return false; // í¼ ì œì¶œ ë°©ì§€
        }

        return true; // í¼ ì œì¶œ í—ˆìš©
    }
</script>
<!-- Latest compiled and minified CSS -->
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
<link href="https://getbootstrap.com/docs/5.3/assets/css/docs.css" rel="stylesheet">
<title>Bootstrap Example</title>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
<meta name="viewport" content="width=device-width" , initial-scale="1">
<body>
<div class="container">
    <form th:action="@{/admin/game/register}"  method="post" onsubmit="updateMVPIndex()">
        <input type="hidden" id="mvpIndex" name="mvpIndex">
        <div class="">
            <div class="date-container">
                <label for="gameDate">[ê²½ê¸°ë‚ ì§œ] </label>
                <input type="date" id="gameDate" name="gameDate" required>
            </div>
            <div>
                * íƒ€ìœ¨ ex) 0.333, MVPëŠ” 1ëª…, ì•ˆíƒ€(í™ˆëŸ°) ì—†ìœ¼ë©´ 0ìœ¼ë¡œ
            </div>
            <ul class="list-group">
                <li class="list-group-item list-group-item-info">
                    ìŠ¹ë¦¬ íŒ€
                </li>
            </ul>
            <table class="table table-bordered border-success-subtle">
                <thead>
                    <tr>
                        <th style="text-align: center;">ì´ë¦„</th> <!-- 25 -->
                        <th style="text-align: center;">íƒ€ìœ¨</th> <!-- 20 -->
                        <th style="text-align: center;">ì•ˆíƒ€</th> <!-- 10 -->
                        <th style="text-align: center;">í™ˆëŸ°</th> <!-- 10 -->
                        <th style="text-align: center;">MVP</th> <!-- 10 -->
                        <th style="text-align: center;">ìƒì€ ëˆ</th> <!-- 25 -->
                    </tr>
                </thead>
                <tbody>
                    <tr th:each="winPlayer, index : ${#numbers.sequence(0,3)}">
                        <td style="width: 22%;">
                            <select class="form-control" th:id="|winPlayerName${index.index}|" th:name="|winPlayerName[${index.index}]|">
                                <option value="" disabled selected>ì„ íƒ</option>
                                <option th:each="name : ${nameList}" th:value="${name}" th:text="${name}"></option>
                            </select>
                        </td>
                        <td style="width: 20%;">
                            <input type="number" step="0.001" class="form-control" th:id="|winPlayerHitPercent${index.index}|" th:name="|winPlayerHitPercent[${index.index}]|" >
                        </td>
                        <td style="width: 14%;">
                            <input type="text" class="form-control" th:id="|winPlayerHit${index.index}|" inputmode="numeric" th:name="|winPlayerHit[${index.index}]|">
                        </td>
                        <td style="width: 14%;">
                            <input type="text" class="form-control" th:id="|winPlayerHomerun${index.index}|" inputmode="numeric" th:name="|winPlayerHomerun[${index.index}]|">
                        </td>
                        <td style ="width:6%;">
                            <input type="checkbox" class="player-mvp" th:id="|winPlayerMVP${index.index}|" th:name="|winPlayerMVP[${index.index}]|">
                        </td>
                        <td style="width: 24%;">
                            <input type="number" class="form-control" th:id="|winPlayerMoney${index.index}|" inputmode="numeric" th:name="|winPlayerMoney[${index.index}]|">
                        </td>
                    </tr>
                </tbody>
            </table>

            <br>

            <ul class="list-group">
                <li class="list-group-item list-group-item-danger">
                    íŒ¨ë°° íŒ€
                </li>
            </ul>
            <table class="table table-bordered border-success-subtle">
                <thead>
                    <tr>
                        <th style="text-align: center;">ì´ë¦„</th> <!-- 25 -->
                        <th style="text-align: center;">íƒ€ìœ¨</th> <!-- 20 -->
                        <th style="text-align: center;">ì•ˆíƒ€</th> <!-- 10 -->
                        <th style="text-align: center;">í™ˆëŸ°</th> <!-- 10 -->
                        <th style="text-align: center;">MVP</th> <!-- 10 -->
                        <th style="text-align: center;">ìƒì€ ëˆ</th> <!-- 25 -->
                    </tr>
                </thead>
                <tbody>
                    <tr th:each="losePlayer, index : ${#numbers.sequence(0,3)}">
                        <td style="width: 22%;">
                            <!-- <input type="text" class="form-control" th:id="|losePlayerName${index}|"> -->
                            <select class="form-control" th:id="|losePlayerName${index.index}|" th:name="|losePlayerName[${index.index}]|">
                                <option value="" disabled selected>ì„ íƒ</option>
                                <!--/*@thymesVar id="list" type=""*/-->
                                <option th:each="name : ${nameList}" th:value="${name}" th:text="${name}"></option>
                            </select>
                        </td>
                        <td style="width: 20%;">
                            <input type="number" step="0.001" class="form-control" th:id="|losePlayerHitPercent${index.index}|" th:name="|losePlayerHitPercent[${index.index}]|">
                        </td>
                        <td style="width: 14%;">
                            <input type="text" class="form-control" th:id="|losePlayerHit${index.index}|" inputmode="numeric" th:name="|losePlayerHit[${index.index}]|">
                        </td>
                        <td style="width: 14%;">
                            <input type="text" class="form-control" th:id="|losePlayerHomerun${index.index}|" inputmode="numeric" th:name="|losePlayerHomerun[${index.index}]|">
                        </td>
                        <td style ="width:6%;">
                            <input type="checkbox" class="player-mvp" th:id="|losePlayerMVP${index.index}|" th:name="|losePlayerMVP[${index.index}]|">
                        </td>
                        <td style="width: 24%;">
                            <input type="text" class="form-control" th:id="|losePlayerMoney${index.index}|" inputmode="numeric" th:name="|losePlayerMoney[${index.index}]|">
                        </td>
                    </tr>
                </tbody>
            </table>

            <div style="display: flex; justify-content: center; align-items: center;">
                <button type="submit" class="submit-button">ê²½ê¸° ë“±ë¡</button>
            </div>
        </div>
    </form>
</div>
</body>
</html>